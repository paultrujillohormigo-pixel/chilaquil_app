{% extends "base.html" %}

{% block content %}

<h2>Pedidos abiertos</h2>

{% if pedidos %}
<div style="display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:12px;">

    {% for p in pedidos %}
    <div style="border:1px solid #ccc; padding:12px; border-radius:8px;">

        <strong>Pedido #{{ p.id }}</strong><br>

        <small>
            ğŸ“… {{ p.fecha }}
        </small><br><br>

        {% if p.mesa %}
            Mesa: {{ p.mesa }}<br>
        {% endif %}

        Mesero: {{ p.mesero or '-' }}<br>
        Total: <strong>{{ p.total | money }}</strong><br><br>

        <!-- Entrar al pedido -->
        <a href="{{ url_for('ver_pedido', pedido_id=p.id) }}">
            â• Entrar al pedido
        </a>

        <br><br>

        <!-- Cerrar pedido -->
        <form method="post"
              action="{{ url_for('cerrar_pedido', pedido_id=p.id) }}">
            <button type="submit">Cerrar pedido</button>
        </form>

        <!-- Eliminar pedido -->
        <form method="post"
              action="{{ url_for('eliminar_pedido', pedido_id=p.id) }}"
              onsubmit="return confirm('Â¿Eliminar este pedido?')"
              style="margin-top:6px;">
            <button type="submit"
                    style="background:#e74c3c;color:white;">
                ğŸ—‘ï¸ Eliminar pedido
            </button>
        </form>

    </div>
    {% endfor %}

</div>
{% else %}
<p>No hay pedidos abiertos.</p>
{% endif %}

{% endblock %}
